%
% Tests
%

:- include('mod12pa.pl').

test_concatenate :- concatenate([1,2,3],[4,5,6],[1,2,3,4,5,6]), 
                    concatenate([1,2],[3],[1,2,3]),
                    concatenate([1,2,3],[],[1,2,3]),
                    concatenate([],[1,2,3],[1,2,3]),
                    concatenate([],[],[]), 
                    \+ concatenate([1,2,3],[4,5],[1,2,3,5,4]), !.

test_singletons :- singletons([],[]),
                   singletons([1,2,3],[[1],[2],[3]]),
                   singletons([3,2],[[3],[2]]),
                   singletons([1],[[1]]),
                   \+ singletons([1],[1]), !.

test_prefix_all :- prefix_all(1, [], []), 
                   prefix_all(1, [[1],[2],[3]], [[1,1],[1,2],[1,3]]),
                   prefix_all(5, [[5,2,3],[5,6,7]], [[5,5,2,3],[5,5,6,7]]),
                   \+ prefix_all(5, [[1,2]],[[2,1,5]]), !.

test_pairs_all :- pairs_all(1, [], []), 
                  pairs_all(1, [1,2,3], [[1,1],[1,2],[1,3]]),
                  pairs_all(5, [5,2,3], [[5,5],[5,2],[5,3]]),
                  \+ pairs_all(5, [5,2,3], [[5,5],[5,2]]), !.

test_ccw :- ccw([[0,0],[1,0],[1,1]],[[0,0],[1,0],[1,1]]),
            ccw([[0,0],[0,1],[1,0]],[[0,0],[1,0],[0,1]]),
            \+ ccw([[0,0],[0,1],[1,0]],[[0,0],[1,1],[1,0]]), !.

test_ccw_triples :- ccw_triples([],[]),
                    ccw_triples([[[0,0],[0,1],[1,0]],[[0,0],[1,1],[1,0]]], [[[0,0],[1,0],[0,1]],[[0,0],[1,0],[1,1]]]),
                    \+ ccw_triples([[[0,0],[0,1],[1,0]],[[0,0],[1,1],[1,0]]], [[[0,0],[0,1],[1,0]],[[0,0],[1,0],[1,1]]]), !.

test_pairs_of_points :- pairs_of_points([],[]),
                        pairs_of_points([[0,0]],[]),
                        pairs_of_points([[0,0],[1,0]],[[[0,0],[1,0]]]),
                        pairs_of_points([[0,0],[1,0],[0,1]],[[[0,0],[1,0]],[[0,0],[0,1]],[[1,0],[0,1]]]),
                        \+ pairs_of_points([[0,0],[1,0]],[[[0,0],[1,0]],[[0,0],[1,0]]]), !.

test_triples_of_points :- triples_of_points([[0,0],[1,0],[0,1]],[[[0,0],[1,0],[0,1]]]),
                          triples_of_points(
                            [[0,0],[1,0],[0,1],[1,1]],
                            [
                             [[0,0],[1,0],[0,1]],
                             [[0,0],[1,0],[1,1]],
                             [[0,0],[0,1],[1,1]],
                             [[1,0],[0,1],[1,1]]
                            ]),
                          triples_of_points([[0,0],[1,0]],[]),
                          triples_of_points([[0,0]],[]),
                          triples_of_points([],[]),
                          \+ triples_of_points([[0,0],[1,0],[1,1]],[[[0,0],[1,0],[0,1]]]),
                          !.

test_is_delaunay_triangle :- 
            is_delaunay_triangle([[0,0],[1,0],[0.25,0.125]], [[0,0],[1,0],[1,1],[0,1],[0.25,0.125]]),
            \+ is_delaunay_triangle([[0,0],[1,0],[1,1]], [[0,0],[1,0],[1,1],[0,1],[0.25,0.125]]), !.

test_delaunay_triangles :- 
            delaunay_triangles(
              [[[0, 0], [1, 1], [0, 1]], [[0, 0], [1, 1], [1, 0]], [[0, 0], [1, 1], [0.25, 0.125]], [[0, 0], [0, 1], [1, 0]], [[0, 0], [0, 1], [0.25, 0.125]], [[0, 0], [1, 0], [0.25, 0.125]], [[1, 1], [0, 1], [1, 0]], [[1, 1], [0, 1], [0.25, 0.125]], [[1, 1], [1, 0], [0.25, 0.125]], [[0, 1], [1, 0], [0.25, 0.125]]],
              [[0,0],[1,1],[0,1],[1,0],[0.25,0.125]],
              [[[0,0],[1,1],[1,0]],[[0,0],[0,1],[1,0]],[[0,0],[1,0],[0.25,0.125]],[[1,1],[0,1],[0.25,0.125]]]
            ),
            \+ delaunay_triangles(
              [[[0, 2], [1, 1], [0, 1]], [[0, 0], [1, 1], [1, 0]], [[0, 0], [1, 1], [0.25, 0.125]], [[0, 0], [0, 1], [1, 0]], [[0, 0], [0, 1], [0.25, 0.125]], [[0, 0], [1, 0], [0.25, 0.125]], [[1, 1], [0, 1], [1, 0]], [[1, 1], [0, 1], [0.25, 0.125]], [[1, 1], [1, 0], [0.25, 0.125]], [[0, 1], [1, 0], [0.25, 0.125]]],
              [[0,2],[1,1],[0,1],[1,0],[0.25,0.125]],
              [[[0,0],[1,1],[1,0]],[[0,0],[0,1],[1,0]],[[0,0],[1,0],[0.25,0.125]],[[1,1],[0,1],[0.25,0.125]]]
            ), !.

test_delaunay_triangulation :-
  delaunay_triangulation(
              [[0,0],[1,1],[0,1],[1,0],[0.25,0.125]],
              [[[0, 0], [0.25, 0.125], [0, 1]], [[0, 0], [1, 0], [0.25, 0.125]], [[1, 1], [0, 1], [0.25, 0.125]], [[1, 1], [0.25, 0.125], [1, 0]]]
  ),
  \+ delaunay_triangulation(
              [[0,2],[1,1],[0,1],[1,0],[0.25,0.125]],
              [[[0, 0], [0.25, 0.125], [0, 1]], [[0, 0], [1, 0], [0.25, 0.125]], [[1, 1], [0, 1], [0.25, 0.125]], [[1, 1], [0.25, 0.125], [1, 0]]]
  ), !.

test_all :- test_concatenate, 
            test_singletons,
            test_prefix_all,
            test_pairs_all,
            test_ccw,
            test_ccw_triples,
            test_pairs_of_points,
            test_triples_of_points,
            test_is_delaunay_triangle,
            test_delaunay_triangles,
            test_delaunay_triangulation, !.
